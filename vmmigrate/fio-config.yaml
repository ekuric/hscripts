# FIO Test Configuration - Mixed Hosts Mode (Auto-detection)
# This configuration demonstrates the auto-detection capability where the script
# automatically determines whether to use virtctl or SSH for each host

# VM/Host Configuration
vm:
  # Method 1: External host file (recommended for mixed environments)
  #host_file: "mixed-hosts.txt"
  
  # Alternative Method 2: Simple host list with mixed VM and server names
  #hosts: "vm-1 vm-2 myhost.test.com" 
  #  vm-3 vm-4 vm-5" 
  # server1 server2 vm-3"
  
  # Alternative Method 3: Host pattern expansion
  host_pattern: "fed{1..3}" #100}"
  
  # Alternative Method 4: Label-based selection (VMs only)
  #host_labels: "type=vm"
  
  # OpenShift/Kubernetes namespace for VMs (ignored for regular servers)
  namespace: "default"

# Storage Configuration
storage:
  # Per-host device configuration (MANDATORY - no global fallback for safety)
  devices:
    # OpenShift VMs (typically use virtual devices) - using patterns for efficiency
    "fed{1..3}": "vdb"
    
    # Individual hosts (for special cases)
    "myhost.test.com": "sdc"
  
  # Mount point for the test filesystem
  mount_point: "/root/tests/data"
  
  # Filesystem type to create
  filesystem: "xfs"

# FIO Test Configuration
fio:
  # Test file size (e.g., "1G", "500M", "10G")
  test_size: "1G"
  
  # Test runtime in seconds
  runtime: "120"
  
  # Block sizes to test (space-separated)
  block_sizes: "4k" # 8k 128k 1024k 4096k"
  
  # I/O patterns to test (space-separated)
  io_patterns: "write" # read write randread randwrite"
  
  # Number of parallel jobs
  numjobs: "1"
  
  # I/O depth
  iodepth: "16"
  
  # Direct I/O (bypass page cache)
  direct_io: "1"

  # rate_iops  - uncomment if there need to impose rate iops
  # rate_iops: "1000" 

# Output Configuration
output:
  # Directory to store results on remote hosts
  directory: "/root/fio-results"
  
  # Output format (json+, normal, etc.)
  format: "json+"

# Retry and Monitoring Configuration
retry:
  # Retry interval in seconds (default: 30)
  interval: 30
  
  # Maximum number of retry attempts (default: 10)
  max_retries: 10
  
  # Skip initial connectivity test (default: false)
  skip_connectivity_test: false

# Task Monitoring Configuration
monitoring:
  # Check task status every N seconds for long-running tasks (default: 60)
  # Only tasks running longer than this interval will be monitored
  task_monitor_interval: 60

# VM Migration Configuration (OCP CNV environments only)
migrate:
  # List of I/O patterns/workloads during which to trigger VM migrations
  # Migrations will occur at the midpoint of the test runtime (e.g., at 5 min for 10 min test)
  # Only VMs (not regular hosts) will be migrated
  # Default: none (no migrations)
  # Example: workloads: "write randwrite"  # Migrate during write and randwrite tests
  workloads: ""  # Space-separated list of patterns, or empty string for no migrations
  
  # Interval in seconds between VM migrations (default: 0 = migrate all VMs in parallel)
  # Setting this to a positive value (e.g., 2) will migrate VMs sequentially with the specified delay
  # This helps avoid overloading CNV when migrating multiple VMs simultaneously
  # Example: interval: 2  # Migrate one VM, wait 2 seconds, migrate next VM, etc.
  interval: 0  # Seconds to wait between migrations (0 = parallel, >0 = sequential)
